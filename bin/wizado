#!/usr/bin/env bash
set -euo pipefail

# wizado: Steam gaming mode for Hyprland

# Detect if running from source or installed
if [[ -d "./scripts" ]]; then
  ROOT="."
elif [[ -d "/usr/share/wizado/scripts" ]]; then
  ROOT="/usr/share/wizado"
else
  echo "Error: Cannot find wizado scripts" >&2
  exit 1
fi

usage() {
  cat <<'EOF'
wizado - Steam Gaming Mode for Hyprland

Usage:
  wizado setup [--yes|-y] [--dry-run]    Install gaming mode
  wizado remove [--yes|-y] [--dry-run]   Remove gaming mode
  wizado help                            Show this help

Keybindings (after setup):
  Super + Shift + S   Launch Steam in gamescope
  Super + Shift + R   Exit gaming mode
EOF
}

cmd="${1:-}"
shift || true

case "$cmd" in
  setup)   exec "${ROOT}/scripts/setup.sh" "$@" ;;
  remove)  exec "${ROOT}/scripts/remove.sh" "$@" ;;
  help|-h|--help|"") usage; exit 0 ;;
  *) echo "Unknown command: $cmd" >&2; usage; exit 2 ;;
esac
