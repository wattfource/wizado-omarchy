#!/usr/bin/env bash
set -euo pipefail

# Detect if running from source or installed
if [[ -d "./scripts" ]]; then
  ROOT="."
else
  ROOT="/usr/share/wizado"
fi

usage() {
  cat <<'EOF'
wizado

Usage:
  wizado setup [--yes|-y] [--dry-run]
  wizado update [--yes|-y] [--dry-run] [--system]
  wizado remove [--yes|-y] [--dry-run]

Notes:
  - `setup` writes user files (launchers + Hyprland include) under your $HOME.
  - For "exclusive TTY" gamescope mode, setup can install a sudoers drop-in.
EOF
}

cmd="${1:-}"
shift || true

case "$cmd" in
  setup) exec "${ROOT}/scripts/setup.sh" "$@" ;;
  update) exec "${ROOT}/scripts/update.sh" "$@" ;;
  remove) exec "${ROOT}/scripts/remove.sh" "$@" ;;
  -h|--help|"") usage; exit 0 ;;
  *) echo "Unknown command: $cmd" >&2; usage; exit 2 ;;
esac


